var data=localStorage.getItem("todoList")?JSON.parse(localStorage.getItem("todoList")):{todo:[],completed:[]},lifted=!1,drakeTodo=dragula([document.getElementById("todo")],{moves:function(t,e,o){if(lifted)return lifted=!1,o.classList.contains("handle")},isContainer:function(t){return t.classList.contains(".list")}}),drakeCompleted=dragula([document.getElementById("completed")],{moves:function(t,e,o){if(lifted)return lifted=!1,o.classList.contains("handle")},isContainer:function(t){return t.classList.contains(".list")}});function renderTodoListToHTML(){if(0==data.completed.length&&0==data.todo.length);else{for(var t=0;t<data.todo.length;t++){addItemTodo(data.todo[t])}for(var e=0;e<data.completed.length;e++){addItemTodo(data.completed[e],!0)}}onTouchStart()}function dataObjectUpdated(){localStorage.setItem("todoList",JSON.stringify(data))}function addItemTodo(t,e){var o=e?document.getElementById("completed"):document.getElementById("todo"),d=document.createElement("div");d.classList.add("container"),d.classList.add("mirror"),d.setAttribute("id","container"),d.style.opacity=0;var a='<div class="row">                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">                            <div class="content">                                <ul class="items">                                \t<li class="item">                                        <i class="fa fa-bars fa-1x handle" aria-hidden="true"></i>                                    </li>                                    <li class="item">                                        <p class="text" id="text">'+t+'</p>                                    </li>                                    <li class="item delete">                                        <a id="delete" class="deleteButton"><i class="fa fa-trash-o fa-2x" aria-hidden="true"></i></a>                                    </li>                                    <li class="item check">                                       <button id="check" class="checkButton"><i class="fa fa-check-circle-o fa-2x" aria-hidden="true"></i></button>                                    </li>                                </ul>                            </div>                        </div>\t                </div>';d.innerHTML=a,o.insertBefore(d,o.childNodes[0]),fadeIn(d);for(var n=document.getElementsByClassName("deleteButton"),i=0;i<n.length;i++)n[i].addEventListener("touchstart",removeItem);var r=document.getElementsByClassName("checkButton");for(i=0;i<r.length;i++)r[i].addEventListener("touchstart",completeItem)}function completeItem(){var t=this,e=t.parentNode.parentNode.querySelector("#text").innerText,o=t.closest("#container"),d=o.parentNode.id;t.setAttribute("disabled",!0),"todo"===d?(data.todo.splice(data.todo.indexOf(e),1),data.completed.push(e)):(data.completed.splice(data.completed.indexOf(e),1),data.todo.push(e)),fadeOut(t,o,"todo"==d?document.getElementById("completed"):document.getElementById("todo"),!0),dataObjectUpdated(),vibrate()}function removeItem(){var t=this.closest("#container"),e=t.parentNode.id,o=this.parentNode.parentNode.querySelector("#text").innerText;"todo"===e?data.todo.splice(data.todo.indexOf(o),1):data.completed.splice(data.completed.indexOf(o),1),fadeOut(!1,t,!1,!1),dataObjectUpdated(),vibrate()}function fadeOut(t,e,o,d){var a=setInterval(function(){(n-=.1)<=0&&(clearInterval(a),!0===d?(o.insertBefore(e,o.childNodes[0]),fadeIn(e),t.removeAttribute("disabled")):e.remove()),e.style.opacity=n},40),n=1}function fadeIn(t){var e=setInterval(function(){(o+=.1)>=1&&(clearInterval(e),o=1),t.style.opacity=o},40),o=.1}function onTouchStart(){for(var t,e,o,d=document.querySelectorAll(".mirror"),a=800,n=0;n<d.length;n++)d[n].querySelector(".handle").addEventListener("touchstart",i,!1),d[n].querySelector(".handle").addEventListener("touchend",r,!1);function i(d){d.preventDefault(),(o=this).closest("#container").removeAttribute("style"),e||(t=setTimeout(l,a),e=!0)}function r(){lifted=!1,t&&(clearTimeout(t),e=!1),observeDrop(this)}function l(){var t="todo"==o.closest("#container").parentNode.getAttribute("id")?o.closest("#container").offsetTop-window.scrollY+130:o.closest("#container").offsetTop+document.querySelector("#todo").offsetHeight-window.scrollY+170;lifted=!0,drakeTodo.lift(o),drakeCompleted.lift(o);var e=document.querySelector(".gu-mirror");e.style.top=t+"px",e.style.left="20px",vibrate()}}function observeDrop(t){var e=t.closest("#container").parentNode,o=e.querySelectorAll(".container");if("todo"==e.getAttribute("id")){data.todo=[];for(var d=0;d<o.length;d++)data.todo.unshift(o[d].querySelector(".text").innerText)}else{data.completed=[];for(d=0;d<o.length;d++)data.completed.unshift(o[d].querySelector(".text").innerText)}dataObjectUpdated()}function intro(){var t=document.getElementById("intro"),e=document.getElementById("todo-app");setTimeout(function(){t.style.display="none",e.style.display="block"},2e3)}function vibrate(){navigator.vibrate(100)}renderTodoListToHTML(),document.getElementById("add").addEventListener("touchstart",function(){var t=document.getElementById("item").value;t&&(addItemTodo(t),document.getElementById("item").value="",data.todo.push(t),dataObjectUpdated(),onTouchStart(),vibrate())}),document.getElementById("item").addEventListener("keydown",function(t){var e=this.value;(13===t.keyCode&&e||13===t.keyCode&&e)&&(addItemTodo(e),document.getElementById("item").value="",data.todo.push(e),dataObjectUpdated(),onTouchStart(),vibrate())}),intro(),document.addEventListener("deviceready",vibrate,!1);